<!DOCTYPE html>
<html>
<head>
    <title>ğŸ„ Secret Santa ğŸ…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(#b30000, #4b0000);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }
        .card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 12px;
            max-width: 500px;
            margin: 20px auto;
            backdrop-filter: blur(4px);
        }
        input, button {
            width: 100%;
            padding: 12px;
            margin-top: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
        }
        input {
            background: #fff;
            color: #000;
        }
        button {
            background: #1d9f30;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover {
            background: #157324;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<h1>ğŸ„ Secret Santa with Wishes ğŸ…</h1>

<!-- Wish Submission Card -->
<div class="card" id="wishCard">
    <h2>Step 1: Submit Your Own Wishes</h2>
    <p>You can only submit for yourself.</p>
    <input id="wishName" placeholder="Enter your name" />
    <input id="wish1" placeholder="Wish #1" />
    <input id="wish2" placeholder="Wish #2" />
    <input id="wish3" placeholder="Wish #3" />
    <button onclick="submitWishes()">Submit Wishes</button>
    <p id="wishMessage" style="margin-top:12px;"></p>
</div>

<!-- Draw Card -->
<div class="card hidden" id="drawCard">
    <h2>Step 2: Draw a Name</h2>
    <input id="drawNameInput" placeholder="Enter your name" />
    <button onclick="drawName()">Draw ğŸ</button>
    <p id="drawMessage" style="margin-top:12px;"></p>
    <h3>Remaining Participants to Draw:</h3>
    <p id="remainingDrawList"></p>
</div>

<!-- Result Card -->
<div class="card hidden" id="resultCard">
    <h2>Your Secret Santa Match:</h2>
    <p id="assignedName" style="font-size:24px; font-weight:bold;"></p>
    <h3>Their Wishes:</h3>
    <ul id="assignedWishes"></ul>
    <button onclick="nextDrawer()">Next Person</button>
</div>

<script>
// --- Participants ---
let participants = ["Armaan","Noaman","Salman","Zeshan","Mom","Dad","Monica","Amnah"];
let wishes = {}; // lowercase name => array of 3 wishes
let submittedWishes = new Set(); // lowercase names
let drawnSet = new Set();       // lowercase names
let availablePool = [...participants]; // names that can still be drawn

// --- Update remaining draw list ---
function updateRemainingDrawList() {
    let remaining = participants.filter(p => !drawnSet.has(p.toLowerCase()));
    document.getElementById("remainingDrawList").textContent = remaining.join(", ");
}

// --- Submit Wishes ---
function submitWishes() {
    let name = document.getElementById("wishName").value.trim();
    let wish1 = document.getElementById("wish1").value.trim();
    let wish2 = document.getElementById("wish2").value.trim();
    let wish3 = document.getElementById("wish3").value.trim();

    if (!name || !wish1 || !wish2 || !wish3) {
        document.getElementById("wishMessage").textContent = "Please fill in all fields.";
        return;
    }

    let drawerName = name.toLowerCase();

    // Only allow participant to submit once
    if (submittedWishes.has(drawerName)) {
        document.getElementById("wishMessage").textContent = "You have already submitted your wishes!";
        return;
    }

    // Validate that the name exists in participants
    if (!participants.some(p => p.toLowerCase() === drawerName)) {
        document.getElementById("wishMessage").textContent = "Your name isn't on the list!";
        return;
    }

    // Save wishes
    wishes[drawerName] = [wish1, wish2, wish3];
    submittedWishes.add(drawerName);

    // Clear fields
    document.getElementById("wishName").value = "";
    document.getElementById("wish1").value = "";
    document.getElementById("wish2").value = "";
    document.getElementById("wish3").value = "";

    // Automatically go to draw card after submission
    document.getElementById("wishCard").classList.add("hidden");
    document.getElementById("drawCard").classList.remove("hidden");
    updateRemainingDrawList();
}

// --- Draw Name ---
function drawName() {
    let nameInput = document.getElementById("drawNameInput").value.trim();
    if (!nameInput) return;

    let drawer = participants.find(p => p.toLowerCase() === nameInput.toLowerCase());
    if (!drawer) {
        document.getElementById("drawMessage").textContent = "Your name isn't on the list!";
        return;
    }

    if (drawnSet.has(drawer.toLowerCase())) {
        document.getElementById("drawMessage").textContent = "You've already drawn a name!";
        return;
    }

    // Eligible pool: can't draw yourself
    let eligible = availablePool.filter(p => p.toLowerCase() !== drawer.toLowerCase());
    if (eligible.length === 0) {
        document.getElementById("drawMessage").textContent = "No names left to draw!";
        return;
    }

    // Random pick
    let chosen = eligible[Math.floor(Math.random() * eligible.length)];

    // Remove chosen from availablePool
    availablePool = availablePool.filter(p => p !== chosen);
    drawnSet.add(drawer.toLowerCase());

    // Show result
    document.getElementById("assignedName").textContent = chosen;
    let ul = document.getElementById("assignedWishes");
    ul.innerHTML = "";
    wishes[chosen.toLowerCase()].forEach(w => {
        let li = document.createElement("li");
        li.textContent = w;
        ul.appendChild(li);
    });

    document.getElementById("drawCard").classList.add("hidden");
    document.getElementById("resultCard").classList.remove("hidden");
    document.getElementById("drawNameInput").value = "";
    updateRemainingDrawList();
}

// --- Next Drawer ---
function nextDrawer() {
    document.getElementById("resultCard").classList.add("hidden");
    document.getElementById("drawCard").classList.remove("hidden");
}
</script>

</body>
</html>
