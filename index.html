<!DOCTYPE html>
<html>
<head>
    <title>üéÑ Christmas Secret Name Generator üéÖ</title>
    <style>
        body {
            font-family: "Arial";
            background: linear-gradient(#b30000, #4b0000);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 12px;
            max-width: 420px;
            margin: auto;
            backdrop-filter: blur(4px);
        }

        input, button {
            width: 100%;
            padding: 12px;
            margin-top: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
        }

        input {
            background: #fff;
        }

        button {
            background: #1d9f30;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover {
            background: #157324;
        }

        .hidden {
            display: none;
        }

        /* Snow effect */
        @keyframes snow {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(700px); }
        }

        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 18px;
            animation: snow linear infinite;
        }
    </style>
</head>
<body>

<h1>üéÑ Secret Name Generator üéÖ</h1>
<p>Enter your name to get your secret partner!</p>

<div class="card" id="drawBox">
    <input id="yourName" placeholder="Type your name..." />
    <button onclick="drawName()">Draw My Name üéÅ</button>
</div>

<div class="card hidden" id="resultBox">
    <h2>Your Match:</h2>
    <p id="assignedName" style="font-size:26px; font-weight:bold;"></p>
    <button onclick="nextPerson()">Next Person</button>
</div>

<div class="card">
    <h3>Participants Remaining:</h3>
    <p id="remainingList"></p>
</div>

<script>
// --- PRELOADED NAMES ---
let allParticipants = [
    "Armaan",
    "Noaman",
    "Salman",
    "Zeshan",
    "Mom",
    "Dad",
    "Monica",
    "Amnah"
];

// Names that are still eligible to be drawn
let availablePool = [...allParticipants];

// Keep track of who has already drawn
let drawnSet = new Set();

// Update remaining list display (case-insensitive)
function updateRemaining() {
    let remaining = allParticipants.filter(name => 
        ![...drawnSet].some(d => d.toLowerCase() === name.toLowerCase())
    );
    document.getElementById("remainingList").textContent = remaining.join(", ");
}
updateRemaining();

// --- DRAW FUNCTION ---
function drawName() {
    let input = document.getElementById("yourName").value.trim();
    if (!input) return alert("Please enter your name.");

    // Case-insensitive match for drawer
    let drawer = allParticipants.find(n => n.toLowerCase() === input.toLowerCase());
    if (!drawer) return alert("Your name isn't on the list.");

    // Check if drawer already drew
    if (drawnSet.has(drawer)) {
        return alert("You've already drawn a name!");
    }

    // Build eligible pool for this drawer (exclude themselves)
    let eligible = availablePool.filter(n => n.toLowerCase() !== drawer.toLowerCase());

    if (eligible.length === 0) {
        alert("No names left for you to draw!");
        return;
    }

    // Pick a random name
    let chosen = eligible[Math.floor(Math.random() * eligible.length)];

    // Remove chosen from available pool globally
    availablePool = availablePool.filter(n => n !== chosen);

    // Mark drawer as having drawn
    drawnSet.add(drawer);

    // Show result
    document.getElementById("assignedName").textContent = chosen;
    document.getElementById("drawBox").classList.add("hidden");
    document.getElementById("resultBox").classList.remove("hidden");

    // Update remaining participants
    updateRemaining();
}

// --- NEXT PERSON ---
function nextPerson() {
    document.getElementById("yourName").value = "";
    document.getElementById("drawBox").classList.remove("hidden");
    document.getElementById("resultBox").classList.add("hidden");
}

// --- Add falling snow ---
for (let i = 0; i < 50; i++) {
    let snow = document.createElement("div");
    snow.innerHTML = "‚ùÑ";
    snow.classList.add("snowflake");
    snow.style.left = Math.random() * 100 + "vw";
    snow.style.animationDuration = (3 + Math.random() * 5) + "s";
    snow.style.opacity = Math.random();
    document.body.appendChild(snow);
}
</script>

</body>
</html>
